package com.gruposolux.rcivil.pdisciplinario.config;

import com.gruposolux.rcivil.pdisciplinario.domain.enumeration.*;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.context.annotation.Configuration;
import org.springframework.messaging.Message;
import org.springframework.statemachine.StateContext;
import org.springframework.statemachine.StateMachine;
import org.springframework.statemachine.config.EnableStateMachine;
import org.springframework.statemachine.config.StateMachineConfigurerAdapter;
import org.springframework.statemachine.config.builders.StateMachineConfigurationConfigurer;
import org.springframework.statemachine.config.builders.StateMachineStateConfigurer;
import org.springframework.statemachine.config.builders.StateMachineTransitionConfigurer;
import org.springframework.statemachine.listener.StateMachineListenerAdapter;
import org.springframework.statemachine.state.State;
import org.springframework.statemachine.transition.Transition;
import java.util.EnumSet;
import java.util.HashSet;
import java.util.Set;

@Configuration
/**
 *  StateMachineConfigureAdapter  es una clase de la dependencia stateMachine
 *
 *  CREATED BY RUBEN BARRERA
 */
@EnableStateMachine(name = "providenciaStateMachine")
public class ProvidenciaStateMachineConfiguration extends StateMachineConfigurerAdapter<String, String> {

    private static Logger logger = LoggerFactory.getLogger(ProvidenciaStateMachineConfiguration.class);

    @Override
    public void configure(StateMachineStateConfigurer<String, String> states)
        throws Exception {
        Set<String> stringStates = new HashSet<>();
        EnumSet.allOf(EstadoProvidencia.class).forEach(entity -> stringStates.add(entity.name()));
        states.withStates()
            .initial(EstadoProvidencia.NUEVA_PROVIDENCIA.name())
            .state(EstadoProvidencia.RESOLUCION_Y_MEMO.name())
            .states(stringStates);
    }

    @Override
    public void configure(StateMachineTransitionConfigurer<String, String > transitions)
        throws Exception {


        {
            transitions
                .withExternal()
                .source(EstadoProvidencia.NUEVA_PROVIDENCIA.name()).state(EstadoDerivacion.LEIDO.name()).target(EstadoProvidencia.PROVIDENCIA_CREADA.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.PROVIDENCIA_CREADA.name()).target(EstadoProvidencia.REVISION_PROVIDENCIA.name())
                .source(EstadoProvidencia.PROVIDENCIA_CREADA.name()).target(EstadoProvidencia.FIRMA_PROVIDENCIA.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_PROVIDENCIA.name()).target(EstadoProvidencia.ASIGNACION_NRO_INGRESO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_NRO_INGRESO.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_PROVIDENCIA.name()).target(EstadoProvidencia.ASIGNACION_A_UPD.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_A_UPD.name()).target(EstadoProvidencia.DERIVA_ASIGNACION.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DERIVA_ASIGNACION.name()).target(EstadoProvidencia.RESOLUCION_QUE_INSTRUYE_SUMARIO_MEMO_CONDUCTOR.name())
//                .source(EstadoProvidencia.DERIVA_ASIGNACION.name()).target(EstadoProvidencia.RESOLUCION_QUE_CONCEDE_PRORROGA_1.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_QUE_INSTRUYE_SUMARIO_MEMO_CONDUCTOR.name()).target(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION.name()).target(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO.name()).target(EstadoProvidencia.ASIGNACION_NRO_DESPACHO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_NRO_DESPACHO.name()).target(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO_.name()).target(EstadoProvidencia.FIRMA_DE_RESOLUCION_QUE_INSTRUYE_SUMARIO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DE_RESOLUCION_QUE_INSTRUYE_SUMARIO.name()).target(EstadoProvidencia.ENVIO_A_DGDP.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DGDP.name()).target(EstadoProvidencia.ASIGNACION_NRO_DE_RESOLUCION_QUE_INSTRUYE_SUMARIO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_NRO_DE_RESOLUCION_QUE_INSTRUYE_SUMARIO.name()).target(EstadoProvidencia.ASIGNACION_NRO_INGRESO_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_NRO_INGRESO_.name()).target(EstadoProvidencia.REDACCION_NOTIFICACION_FISCAL.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REDACCION_NOTIFICACION_FISCAL.name()).target(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL.name()).target(EstadoProvidencia.FIRMA_NOTIFICACION_FISCAL.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_NOTIFICACION_FISCAL.name()).target(EstadoProvidencia.ENVIO_A_DESPACHO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DESPACHO.name()).target(EstadoProvidencia.ASIGNACION_NRO_DESPACHO_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_NRO_DESPACHO_.name()).target(EstadoProvidencia.NOTIFICACION_FISCAL_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICACION_FISCAL_.name()).target(EstadoProvidencia.FISCAL_NOTIFICADO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FISCAL_NOTIFICADO.name()).target(EstadoProvidencia.INVESTIGACION.name())
                .event(AccionesProvidencia.FISCAL_ACEPTA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FISCAL_NOTIFICADO.name()).target(EstadoProvidencia.FISCAL_RECHAZO.name())
                .event(AccionesProvidencia.FISCAL_RECHAZA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INVESTIGACION.name()).target(EstadoProvidencia.INVESTIGACION_CERRADA.name())
                .event(AccionesProvidencia.FISCAL_NOTIFICA_A_UPD_CIERRE.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.INVESTIGACION_CERRADA.name()).target(EstadoProvidencia.FORMULA_CARGOS_Y_NOTIFICA.name())
                .source(EstadoProvidencia.INVESTIGACION_CERRADA.name()).target(EstadoProvidencia.INCULPADO_NOTIFICADO.name())
                .event(AccionesProvidencia.FORMULAR_CARGOS.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INVESTIGACION_CERRADA.name()).target(EstadoProvidencia.REMITE_EXPEDIENTE_VISTA_FISCAL.name())
                .event(AccionesProvidencia.SIN_DENUNCIANTE.name())
                .and()

                // -------------- FISCAL ACOGE RECURSO----------

                .withExternal()
//                .source(EstadoProvidencia.NUEVA_PROVIDENCIA_DIRECCION_NACIONAL___.name()).target(EstadoProvidencia.FISCAL_ACOGE.name())
                .source(EstadoProvidencia.PROVIDENCIA_CREADA____.name()).target(EstadoProvidencia.FIRMA_PROVIDENCIA___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_PROVIDENCIA___.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO_____.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO_____.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA_______.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_PROVIDENCIA_______.name()).target(EstadoProvidencia.ASIGNACION_A_UPD___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_A_UPD___.name()).target(EstadoProvidencia.DERIVA_ASIGNACION____.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DERIVA_ASIGNACION____.name()).target(EstadoProvidencia.RESOLUCION_QUE_ACOGE_INHABILIDAD.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_QUE_ACOGE_INHABILIDAD.name()).target(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO___.name()).target(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION___.name()).target(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO___.name()).target(EstadoProvidencia.ASIGNACION_No_DESPACHO________.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DESPACHO________.name()).target(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO___.name()).target(EstadoProvidencia.RESOLUCION_QUE_ACOGE_INHABILIDAD_.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_QUE_ACOGE_INHABILIDAD_.name()).target(EstadoProvidencia.ENVIO_A_DGDP___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DGDP___.name()).target(EstadoProvidencia.ASIGNACION_No_RESOLUCION.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_RESOLUCION.name()).target(EstadoProvidencia.ASIGNACION_No_DE_INGRESO_.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DE_INGRESO_.name()).target(EstadoProvidencia.REDACION_NOTIFICACION_FISCAL.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REDACION_NOTIFICACION_FISCAL.name()).target(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL__.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL__.name()).target(EstadoProvidencia.FIRMA_NOTIFICACION_FISCAL_.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_NOTIFICACION_FISCAL_.name()).target(EstadoProvidencia.ENVIO_A_DESPACHO___.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DESPACHO___.name()).target(EstadoProvidencia.ASIGNACION_No_DESPACHO_________.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DESPACHO_________.name()).target(EstadoProvidencia.NOTIFICACION_FISCAL____.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICACION_FISCAL____.name()).target(EstadoProvidencia.FISCAL_NOTIFICADO.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICACION_FISCAL____.name()).target(EstadoProvidencia.FISCAL_NOTIFICADO.name())
                .event(AccionesProvidencia.FISCAL_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FISCAL_NOTIFICADO.name()).target(EstadoProvidencia.FISCAL_RECHAZO.name())
                .event(AccionesProvidencia.FISCAL_RECHAZA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FISCAL_NOTIFICADO.name()).target(EstadoProvidencia.INVESTIGACION.name())
                .event(AccionesProvidencia.FISCAL_ACEPTA.name())
                .and()
                // ---------------------------------------

                // -------------- FISCAL NO ACOGE RECURSO ----------

                .withExternal()
//                .source(EstadoProvidencia.NUEVA_PROVIDENCIA_DIRECCION_NACIONAL___.name()).target(EstadoProvidencia.FISCAL_NO_ACOGE.name())
                .source(EstadoProvidencia.PROVIDENCIA_CREADA____.name()).target(EstadoProvidencia.FIRMA_PROVIDENCIA____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_PROVIDENCIA____.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO______.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO______.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA________.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_PROVIDENCIA________.name()).target(EstadoProvidencia.ASIGNACION_A_UPD____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_A_UPD____.name()).target(EstadoProvidencia.DERIVA_ASIGNACION_____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DERIVA_ASIGNACION_____.name()).target(EstadoProvidencia.RESOLUCION_QUE_RECHAZA_INHABILIDAD.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_QUE_RECHAZA_INHABILIDAD.name()).target(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO____.name()).target(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION____.name()).target(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO____.name()).target(EstadoProvidencia.ASIGNACION_No_DESPACHO______.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DESPACHO______.name()).target(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO____.name()).target(EstadoProvidencia.RESOLUCION_QUE_RECHAZA_INHABILIDAD_.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_QUE_RECHAZA_INHABILIDAD_.name()).target(EstadoProvidencia.ENVIO_A_DGDP____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DGDP____.name()).target(EstadoProvidencia.ASIGNACION_No_RESOLUCION_.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_RESOLUCION_.name()).target(EstadoProvidencia.ASIGNACION_No_DE_INGRESO__.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DE_INGRESO__.name()).target(EstadoProvidencia.REDACION_NOTIFICACION_FISCAL_.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REDACION_NOTIFICACION_FISCAL_.name()).target(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL___.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL___.name()).target(EstadoProvidencia.FIRMA_NOTIFICACION_FISCAL__.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_NOTIFICACION_FISCAL__.name()).target(EstadoProvidencia.ENVIO_A_DESPACHO____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DESPACHO____.name()).target(EstadoProvidencia.ASIGNACION_No_DESPACHO_______.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DESPACHO_______.name()).target(EstadoProvidencia.NOTIFICACION_FISCAL_____.name())
                .event(AccionesProvidencia.FISCAL_NO_ACOGE.name())
                .and()
                // ---------------------------------------

                // ----------- DEVOLVER    -------------------
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.UPD_REDACTA_RESOLUCION_Y_MEMO.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_Y_MEMO.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()

                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name()).target(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_VISTA_FISCAL.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and();
        }
        /**
         *   FORMULA CARGOS 1  CONTINUA EL FLUJO CON MAS OPCIONES
         */
        {
            transitions
                .withExternal()
//                .source(EstadoProvidencia.INCULPADO_NOTIFICADO.name()).target(EstadoProvidencia.ENVIA_VISTA_FISCAL_A_DN.name())
                .source(EstadoProvidencia.INCULPADO_NOTIFICADO.name()).target(EstadoProvidencia.REALIZA_DESCARGO.name())
                .event(AccionesProvidencia.REALIZO_DESCARGO.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.FORMULA_CARGOS_Y_NOTIFICA.name()).target(EstadoProvidencia.INCULPADO_ENVIA_MEMO.name())
//                .source(EstadoProvidencia.FORMULA_CARGOS_Y_NOTIFICA.name()).target(EstadoProvidencia.TERMINO_PROBATORIO.name())
//                .source(EstadoProvidencia.INCULPADO_NOTIFICADO.name()).target(EstadoProvidencia.ENVIA_VISTA_FISCAL_A_DN.name())
                .source(EstadoProvidencia.INCULPADO_NOTIFICADO.name()).target(EstadoProvidencia.REALIZA_DESCARGO.name())
                .event(AccionesProvidencia.INCULPADO_ENVIA_MEMO.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REALIZA_DESCARGO.name()).target(EstadoProvidencia.ENVIA_VISTA_FISCAL_A_DN___.name())
                .event(AccionesProvidencia.ENVIA_VISTA_FISCAL.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ENVIA_VISTA_FISCAL_A_DN.name()).target(EstadoProvidencia.NUEVO_ESTADO.name())
                .source(EstadoProvidencia.REALIZA_DESCARGO.name()).target(EstadoProvidencia.ENVIA_VISTA_FISCAL_A_DN_.name())
                .event(AccionesProvidencia.TERMINO_PROBATORIO.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.FORMULA_CARGOS_Y_NOTIFICA.name()).target(EstadoProvidencia.INCULPADO_NO_ENVIA_MEMO.name())
                .source(EstadoProvidencia.INCULPADO_NOTIFICADO.name()).target(EstadoProvidencia.ENVIA_VISTA_FISCAL_A_DN__.name())
                .event(AccionesProvidencia.INCULPADO_NO_ENVIA_MEMO.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INCULPADO_ENVIA_MEMO.name()).target(EstadoProvidencia.FISCAL_REMITE_SUMARIO_A_DN.name())
                .event(AccionesProvidencia.FORMULAR_CARGOS.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INCULPADO_ENVIA_MEMO.name()).target(EstadoProvidencia.FISCAL_REMITE_SUMARIO_A_DN.name())
                .event(AccionesProvidencia.TERMINO_PROBATORIO.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INCULPADO_NO_ENVIA_MEMO.name()).target(EstadoProvidencia.FISCAL_REMITE_SUMARIO_A_DN.name())
                .event(AccionesProvidencia.FORMULAR_CARGOS.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INCULPADO_NO_ENVIA_MEMO.name()).target(EstadoProvidencia.FISCAL_REMITE_SUMARIO_A_DN.name())
                .event(AccionesProvidencia.TERMINO_PROBATORIO.name())
                .and()
                .withExternal()
                // NUEVO FLUJO RELACION ENVIA_VISTA_FISCAL_A_DN
//                .source(EstadoProvidencia.INVESTIGACION.name()).target(EstadoProvidencia.ASIGNACION_A_SJ.name())
//                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.FISCAL_REMITE_SUMARIO_A_DN.name()).target(EstadoProvidencia.ENVIAR_SUMARIO_A_SUB_DIRECCION.name())
                .source(EstadoProvidencia.FISCAL_REMITE_SUMARIO_A_DN.name()).target(EstadoProvidencia.ASIGNACION_A_SJ.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_A_SJ.name()).target(EstadoProvidencia.REVISION_ASIGNACION_Y_ENVIA_SJ.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_ASIGNACION_Y_ENVIA_SJ.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ASIGNACION_A_SJ_.name()).target(EstadoProvidencia.ENVIAR_SUMARIO_A_SUB_DIRECCION.name())
//                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.DGD_DESPACHA_SUMARIO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_SUMARIO.name())
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO.name()).target(EstadoProvidencia.REVISA_SUMARIO_COMPLETO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_SUMARIO.name()).target(EstadoProvidencia.SUB_DIRECCION_ASIGNA_ABOGADO.name())
                .source(EstadoProvidencia.REVISA_SUMARIO_COMPLETO.name()).target(EstadoProvidencia.ASIGNACION_DE_ABOGADO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SUB_DIRECCION_ASIGNA_ABOGADO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_SUMARIO_Y_NOTIFICA_A_ABOGADO.name())
                .source(EstadoProvidencia.ASIGNACION_DE_ABOGADO.name()).target(EstadoProvidencia.REVISA_ASIGNACION.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_SUMARIO_Y_NOTIFICA_A_ABOGADO.name()).target(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name())
                .source(EstadoProvidencia.REVISA_ASIGNACION.name()).target(EstadoProvidencia.ELABORACION_DE_INFORME_JURIDICO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORACION_DE_INFORME_JURIDICO.name()).target(EstadoProvidencia.NO_REABRE.name())
                .event(AccionesProvidencia.NO_REABRE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORACION_DE_INFORME_JURIDICO.name()).target(EstadoProvidencia.SI_DE_ACUERDO.name())
                .event(AccionesProvidencia.SI_DE_ACUERDO.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORACION_DE_INFORME_JURIDICO.name()).target(EstadoProvidencia.NO_PROPONE.name())
                .event(AccionesProvidencia.NO_PROPONE.name())
                .and()
            ; transitions
//                .withExternal()
//                .source(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name()).target(EstadoProvidencia.SI_DE_ACUERDO.name())
//                .event(AccionesProvidencia.SI_DE_ACUERDO.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name()).target(EstadoProvidencia.NO_REABRE.name())
//                .event(AccionesProvidencia.NO_REABRE.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name()).target(EstadoProvidencia.NO_PROPONE.name())
//                .event(AccionesProvidencia.NO_PROPONE.name())
//                .and()
                .withExternal()
//                .source(EstadoProvidencia.SI_DE_ACUERDO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_INFORME.name())
                .source(EstadoProvidencia.NO_REABRE.name()).target(EstadoProvidencia.REVISA_INFORME.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SI_DE_ACUERDO.name()).target(EstadoProvidencia.REVISA_INFORME.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NO_PROPONE.name()).target(EstadoProvidencia.REVISA_INFORME.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.NO_REABRE.name()).target(EstadoProvidencia.SECRETARIA_REVISA_INFORME.name())
                .source(EstadoProvidencia.REVISA_INFORME.name()).target(EstadoProvidencia.FIRMA_INFORME.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.NO_PROPONE.name()).target(EstadoProvidencia.SECRETARIA_REVISA_INFORME.name())
                .source(EstadoProvidencia.FIRMA_INFORME.name()).target(EstadoProvidencia.ENVIA_INFORME_A_DESPACHO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_INFORME.name()).target(EstadoProvidencia.SUB_DIRECCION_REVISA_INFORME.name())
                .source(EstadoProvidencia.ENVIA_INFORME_A_DESPACHO.name()).target(EstadoProvidencia.No_DESPACHO_SJ.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.No_DESPACHO_SJ.name()).target(EstadoProvidencia.DESPACHO_COMPLETO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SUB_DIRECCION_REVISA_INFORME.name()).target(EstadoProvidencia.SECRETARIA_DESPACHA_INFORME.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_DESPACHA_INFORME.name()).target(EstadoProvidencia.DGD_DESPACHA_SUMARIO_COMPLETO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
; transitions
                // -------------------------      DEVOLVER      --------------------------------

                .withExternal()
                .source(EstadoProvidencia.SI_DE_ACUERDO.name()).target(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NO_REABRE.name()).target(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NO_PROPONE.name()).target(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_INFORME.name()).target(EstadoProvidencia.ABOGADO_ELABORA_INFORME.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SUB_DIRECCION_REVISA_INFORME.name()).target(EstadoProvidencia.SECRETARIA_REVISA_INFORME.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()

                //    --------------------    Estados en los que se puede saltar a PETICION de PRORROGA   -----------------------
                .withExternal()
//                .source(EstadoProvidencia.INVESTIGACION.name()).target(EstadoProvidencia.PETICION_PRORROGA_1.name())
                .source(EstadoProvidencia.INVESTIGACION.name()).target(EstadoProvidencia.PROVIDENCIA_CREADA_.name())
                .event(AccionesProvidencia.PRORROGA.name())
                .and()
//                .withExternal()
////                .source(EstadoProvidencia.INVESTIGACION.name()).target(EstadoProvidencia.PETICION_PRORROGA_1.name())
//                .source(EstadoProvidencia.NUEVA_PROVIDENCIA.name()).target(EstadoProvidencia.FISCAL_RECHAZO.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
                .withExternal()
//                .source(EstadoProvidencia.INVESTIGACION.name()).target(EstadoProvidencia.PETICION_PRORROGA_2.name())
                .source(EstadoProvidencia.INVESTIGACION.name()).target(EstadoProvidencia.REVISION_DE_PROVIDENCIA_.name())
                .event(AccionesProvidencia.PRORROGA2.name())
                .and();

        }

        {
            //     ----------------------------------  PRORROGA 1  NUEVO FLUJO -------------------------------------------------------
            transitions
//                .withExternal()
//                .source(EstadoProvidencia.FISCAL_RECHAZO.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA_.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
                .withExternal()
                .source(EstadoProvidencia.PROVIDENCIA_CREADA_.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_PROVIDENCIA_.name()).target(EstadoProvidencia.FIRMA_PROVIDENCIA_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_PROVIDENCIA_.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO_.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA__.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO_.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA__.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_PROVIDENCIA__.name()).target(EstadoProvidencia.ASIGNACION_A_UPD_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_A_UPD_.name()).target(EstadoProvidencia.DERIVA_ASIGNACION_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DERIVA_ASIGNACION_.name()).target(EstadoProvidencia.RESOLUCION_CONCEDE_PRORROGA_1.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_CONCEDE_PRORROGA_1.name()).target(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO_.name()).target(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION_.name()).target(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO_.name()).target(EstadoProvidencia.ASIGNACION_No_DESPACHO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DESPACHO.name()).target(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.FIRMA_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_1.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_1.name()).target(EstadoProvidencia.ENVIO_A_DGDP_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DGDP_.name()).target(EstadoProvidencia.ASIGNACION_No_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_1.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_1.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO__.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO__.name()).target(EstadoProvidencia.COPIA_PRORROGA.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.COPIA_PRORROGA.name()).target(EstadoProvidencia.REVISO_NOTIFICACION_FISCAL.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISO_NOTIFICACION_FISCAL.name()).target(EstadoProvidencia.FIRMA_COPIA_PRORROGA_1.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_COPIA_PRORROGA_1.name()).target(EstadoProvidencia.ENVIO_A_DESPACHO_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DESPACHO_.name()).target(EstadoProvidencia.DGD_ASIGNACION_No_DESPACHO.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DGD_ASIGNACION_No_DESPACHO.name()).target(EstadoProvidencia.NOTIFICA_COPIA_PRORROGA_1.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_COPIA_PRORROGA_1.name()).target(EstadoProvidencia.INVESTIGACION_.name())
                .event(AccionesProvidencia.CREAR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INVESTIGACION_.name()).target(EstadoProvidencia.INVESTIGACION_CERRADA_.name())
                .event(AccionesProvidencia.FISCAL_NOTIFICA_A_UPD_CIERRE.name())
                .and()
                ;
            transitions
                // ---------------- NUEVO FLUJO PRORROGA 2 -------------------
                .withExternal()
                .source(EstadoProvidencia.INVESTIGACION_.name()).target(EstadoProvidencia.SOLICITUD_PRORROGA_2.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_PROVIDENCIA___.name()).target(EstadoProvidencia.FIRMA_PROVIDENCIA__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_PROVIDENCIA__.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO___.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO___.name()).target(EstadoProvidencia.REVISION_DE_PROVIDENCIA____.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_PROVIDENCIA____.name()).target(EstadoProvidencia.ASIGNACION_A_UPD__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_A_UPD__.name()).target(EstadoProvidencia.DERIVA_ASIGNACION__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DERIVA_ASIGNACION__.name()).target(EstadoProvidencia.RESOLUCION_CONCEDE_PRORROGA_2.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_CONCEDE_PRORROGA_2.name()).target(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_RESOLUCION_Y_MEMO__.name()).target(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_MEMO_VISA_RESOLUCION__.name()).target(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_FIRMA_RESOLUCION_MEMO__.name()).target(EstadoProvidencia.ASIGNACION_No_DESPACHO__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DESPACHO__.name()).target(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_Y_MEMO__.name()).target(EstadoProvidencia.FIRMA_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_2.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_2.name()).target(EstadoProvidencia.ENVIO_A_DGDP__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DGDP__.name()).target(EstadoProvidencia.ASIGNACION_No_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_2.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_No_DE_RESOLUCION_QUE_CONCEDE_PRORROGA_2.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO____.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_INGRESO____.name()).target(EstadoProvidencia.COPIA_PRORROGA_2.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and() .withExternal()
                .source(EstadoProvidencia.COPIA_PRORROGA_2.name()).target(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL_.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_NOTIFICACION_FISCAL_.name()).target(EstadoProvidencia.FIRMA_COPIA_PRORROGA_2.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_COPIA_PRORROGA_2.name()).target(EstadoProvidencia.ENVIO_A_DESPACHO__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ENVIO_A_DESPACHO__.name()).target(EstadoProvidencia.DGD_ASIGNA_No_DESPACHO___.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DGD_ASIGNA_No_DESPACHO___.name()).target(EstadoProvidencia.NOTIFICA_COPIA_PRORROGA_2.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_COPIA_PRORROGA_2.name()).target(EstadoProvidencia.INVESTIGACION__.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INVESTIGACION__.name()).target(EstadoProvidencia.INVESTIGACION_CERRADA_.name())
                .event(AccionesProvidencia.INVESTIGACION_.name())
                .and()

                // ---------------------------------------------------- ---------------------------
                .withExternal()
                .source(EstadoProvidencia.INVESTIGACION_CERRADA_.name()).target(EstadoProvidencia.REMITE_EXPEDIENTE_VISTA_FISCAL.name())
                .event(AccionesProvidencia.SIN_DENUNCIANTE.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INVESTIGACION_CERRADA_.name()).target(EstadoProvidencia.INCULPADO_NOTIFICADO.name())
                .event(AccionesProvidencia.FORMULAR_CARGOS.name())
                .and()
                ;
            transitions
//                .withExternal()
//                .source(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_PRORROGA_1.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_1.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_1.name()).target(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_NOTIFICACION.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_NOTIFICACION.name()).target(EstadoProvidencia.UPD_NOTIFICA_PRORROGA_1_FISCAL.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.UPD_NOTIFICA_PRORROGA_1_FISCAL.name()).target(EstadoProvidencia.DGD_DESPACHA_NOTIFICACION_PRORROGA_1_FISCAL.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.DGD_DESPACHA_NOTIFICACION_PRORROGA_1_FISCAL.name()).target(EstadoProvidencia.INVESTIGACION.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and();


                //     ----------------------------------  PRORROGA 1  -------------------------------------------------------
//            transitions
//                .withExternal()
//                .source(EstadoProvidencia.DGD_RECEPCIONA.name()).target(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_PRORROGA_1.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_PRORROGA_1.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_1.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_1.name()).target(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_NOTIFICACION.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_NOTIFICACION.name()).target(EstadoProvidencia.UPD_NOTIFICA_PRORROGA_1_FISCAL.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.UPD_NOTIFICA_PRORROGA_1_FISCAL.name()).target(EstadoProvidencia.DGD_DESPACHA_NOTIFICACION_PRORROGA_1_FISCAL.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.DGD_DESPACHA_NOTIFICACION_PRORROGA_1_FISCAL.name()).target(EstadoProvidencia.INVESTIGACION.name())
//                .event(AccionesProvidencia.PRORROGA.name())
//                .and()
                // ------- DEVOLVER EN PRORROGA 1 y PRORROGA 2  --------------------

                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name()).target(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_PRORROGA_1.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER_PRORROGA1.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_1.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()

                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name()).target(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_PRORROGA_2.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER_PRORROGA2.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_2.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
            ; transitions
                //     ----------------------------------  PRORROGA 2  ----------------------------------------------------------------------
                .withExternal()
                .source(EstadoProvidencia.DGD_RECEPCIONA.name()).target(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_PRORROGA_2.name())
                .event(AccionesProvidencia.PRORROGA2.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_PRORROGA_2.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name())
                .event(AccionesProvidencia.PRORROGA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_2.name())
                .event(AccionesProvidencia.PRORROGA2.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_NOTIFICACION_PRORROGA_2.name()).target(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_NOTIFICACION.name())
                .event(AccionesProvidencia.PRORROGA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_NOTIFICACION.name()).target(EstadoProvidencia.UPD_NOTIFICA_PRORROGA_2_FISCAL.name())
                .event(AccionesProvidencia.PRORROGA2.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.UPD_NOTIFICA_PRORROGA_2_FISCAL.name()).target(EstadoProvidencia.DGD_DESPACHA_NOTIFICACION_PRORROGA_2_FISCAL.name())
                .event(AccionesProvidencia.PRORROGA2.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DGD_DESPACHA_NOTIFICACION_PRORROGA_2_FISCAL.name()).target(EstadoProvidencia.INVESTIGACION.name())
                .event(AccionesProvidencia.PRORROGA.name())
                .and();
        }

        {
            //  ------------------------------------------  FLUJO ESPECIFICO PARA PROVIDENCIA SOBRECEDER --------------------------------------------
            transitions

                .withExternal()
//                .source(EstadoProvidencia.NUEVA_PROVIDENCIA_ORDENANDO_SOBRESEDIMIENTO.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA___.name())
                .source(EstadoProvidencia.NUEVA_PROVIDENCIA_ORDENANDO_SOBRESEDIMIENTO.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA___.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.PROVIDENCIA_CREADA.name()).target(EstadoProvidencia.SJ_RECIBE_PROVIDENCIA.name())
                .source(EstadoProvidencia.REVISA_PROVIDENCIA___.name()).target(EstadoProvidencia.ASIGNACION_No_DE_INGRESO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SJ_RECIBE_PROVIDENCIA.name()).target(EstadoProvidencia.SECRETARIA_REVISA_PROVIDENCIA.name())
                .source(EstadoProvidencia.ASIGNACION_No_DE_INGRESO.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA____.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_PROVIDENCIA.name()).target(EstadoProvidencia.SUB_DIRECCION_ASIGNA_A_RESOLUCION_Y_MEMO.name())
                .source(EstadoProvidencia.REVISA_PROVIDENCIA____.name()).target(EstadoProvidencia.ASIGNA_A_UPD_PARA_RESOLUCION_QUE_SOBRESEE_SUMARIO_Y_MEMO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SUB_DIRECCION_ASIGNA_A_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.SECRETARIA_DESPACHA_A_UPD.name())
                .source(EstadoProvidencia.ASIGNA_A_UPD_PARA_RESOLUCION_QUE_SOBRESEE_SUMARIO_Y_MEMO.name()).target(EstadoProvidencia.REVISA_ASIGNACION_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_DESPACHA_A_UPD.name()).target(EstadoProvidencia.UPD_REDACTA_RESOLUCION_Y_MEMO.name())
                .source(EstadoProvidencia.REVISA_ASIGNACION_.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_QUE_SOBRESEE_SUMARIO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.UPD_REDACTA_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_Y_MEMO.name())
                .source(EstadoProvidencia.REDACCION_RESOLUCION_QUE_SOBRESEE_SUMARIO.name()).target(EstadoProvidencia.REVISA_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION.name())
                .source(EstadoProvidencia.REVISA_RESOLUCION.name()).target(EstadoProvidencia.VISA_Y_FIRMA.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_VISA.name())
                .source(EstadoProvidencia.VISA_Y_FIRMA.name()).target(EstadoProvidencia.REVISA_FIRMA_Y_VISA.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_VISA.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN.name())
                .source(EstadoProvidencia.REVISA_FIRMA_Y_VISA.name()).target(EstadoProvidencia.ASIGNA_No_DESPACHO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO.name())
                .source(EstadoProvidencia.ASIGNA_No_DESPACHO.name()).target(EstadoProvidencia.REVISA_RESOLUCION_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO.name()).target(EstadoProvidencia.RECIBE_SJ_PARA_MEMO.name())
                .source(EstadoProvidencia.REVISA_RESOLUCION_.name()).target(EstadoProvidencia.FIRMA_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.RECIBE_SJ_PARA_MEMO.name()).target(EstadoProvidencia.REDACCION_NOTIFICACION_MEMO_DEMANDANTE.name())
                .source(EstadoProvidencia.FIRMA_RESOLUCION.name()).target(EstadoProvidencia.DESPACHA_RESOLUCION_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.REDACCION_NOTIFICACION_MEMO_DEMANDANTE.name()).target(EstadoProvidencia.DEMANDADO_NOTIFICADO.name())
                .source(EstadoProvidencia.DESPACHA_RESOLUCION_.name()).target(EstadoProvidencia.ASIGNA_No_RESOLUCION_DE_SOBRESEEDIMIENTO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_No_RESOLUCION_DE_SOBRESEEDIMIENTO.name()).target(EstadoProvidencia.ASIGNA_No_INGRESO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_No_INGRESO.name()).target(EstadoProvidencia.REDACCION_DE_MEMO_INFORMATIVO_PARA_LA_UNIDAD.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REDACCION_DE_MEMO_INFORMATIVO_PARA_LA_UNIDAD.name()).target(EstadoProvidencia.REVISA_MEMO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_MEMO.name()).target(EstadoProvidencia.FIRMA_MEMO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_MEMO.name()).target(EstadoProvidencia.REVISA_FIRMA_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_FIRMA_.name()).target(EstadoProvidencia.ASIGNA_No_DESPACHO_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_No_DESPACHO_.name()).target(EstadoProvidencia.UNIDAD_NOTIFICADA.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and();

            //  ------------------------------------------  FLUJO ESPECIFICO PARA PROVIDENCIA ABSOLVER --------------------------------------------
            transitions

                .withExternal()
//                .source(EstadoProvidencia.NUEVA_PROVIDENCIA_ORDENANDO_SOBRESEDIMIENTO.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA___.name())
                .source(EstadoProvidencia.NUEVA_PROVIDENCIA_ORDENANDO_SOBRESEDIMIENTO_.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA___.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.PROVIDENCIA_CREADA.name()).target(EstadoProvidencia.SJ_RECIBE_PROVIDENCIA.name())
                .source(EstadoProvidencia.REVISA_PROVIDENCIA___.name()).target(EstadoProvidencia.ASIGNACION_No_DE_INGRESO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SJ_RECIBE_PROVIDENCIA.name()).target(EstadoProvidencia.SECRETARIA_REVISA_PROVIDENCIA.name())
                .source(EstadoProvidencia.ASIGNACION_No_DE_INGRESO.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA____.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_PROVIDENCIA.name()).target(EstadoProvidencia.SUB_DIRECCION_ASIGNA_A_RESOLUCION_Y_MEMO.name())
                .source(EstadoProvidencia.REVISA_PROVIDENCIA____.name()).target(EstadoProvidencia.ASIGNA_A_UPD_PARA_RESOLUCION_QUE_ABSUELVE_SUMARIO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SUB_DIRECCION_ASIGNA_A_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.SECRETARIA_DESPACHA_A_UPD.name())
                .source(EstadoProvidencia.ASIGNA_A_UPD_PARA_RESOLUCION_QUE_ABSUELVE_SUMARIO.name()).target(EstadoProvidencia.REVISA_ASIGNACION_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_DESPACHA_A_UPD.name()).target(EstadoProvidencia.UPD_REDACTA_RESOLUCION_Y_MEMO.name())
                .source(EstadoProvidencia.REVISA_ASIGNACION_.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_QUE_ABSUELVE_SUMARIO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.UPD_REDACTA_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_Y_MEMO.name())
                .source(EstadoProvidencia.REDACCION_RESOLUCION_QUE_ABSUELVE_SUMARIO.name()).target(EstadoProvidencia.REVISA_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_Y_MEMO.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION.name())
                .source(EstadoProvidencia.REVISA_RESOLUCION.name()).target(EstadoProvidencia.VISA_Y_FIRMA.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_VISA.name())
                .source(EstadoProvidencia.VISA_Y_FIRMA.name()).target(EstadoProvidencia.REVISA_FIRMA_Y_VISA.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_VISA.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN.name())
                .source(EstadoProvidencia.REVISA_FIRMA_Y_VISA.name()).target(EstadoProvidencia.ASIGNA_No_DESPACHO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO.name())
                .source(EstadoProvidencia.ASIGNA_No_DESPACHO.name()).target(EstadoProvidencia.REVISA_RESOLUCION_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO.name()).target(EstadoProvidencia.RECIBE_SJ_PARA_MEMO.name())
                .source(EstadoProvidencia.REVISA_RESOLUCION_.name()).target(EstadoProvidencia.FIRMA_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.RECIBE_SJ_PARA_MEMO.name()).target(EstadoProvidencia.REDACCION_NOTIFICACION_MEMO_DEMANDANTE.name())
                .source(EstadoProvidencia.FIRMA_RESOLUCION.name()).target(EstadoProvidencia.DESPACHA_RESOLUCION_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.REDACCION_NOTIFICACION_MEMO_DEMANDANTE.name()).target(EstadoProvidencia.DEMANDADO_NOTIFICADO.name())
                .source(EstadoProvidencia.DESPACHA_RESOLUCION_.name()).target(EstadoProvidencia.ASIGNA_No_RESOLUCION_DE_SOBRESEEDIMIENTO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_No_RESOLUCION_DE_SOBRESEEDIMIENTO.name()).target(EstadoProvidencia.ASIGNA_No_INGRESO.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_No_INGRESO.name()).target(EstadoProvidencia.ELABORA_NOTIFICACION_QUE_ABSUELVE.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_NOTIFICACION_QUE_ABSUELVE.name()).target(EstadoProvidencia.REVISA_NOTIFICACION.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_NOTIFICACION.name()).target(EstadoProvidencia.FIRMA_NOTIFICACION.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_NOTIFICACION.name()).target(EstadoProvidencia.REVISA_FIRMA_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_FIRMA_.name()).target(EstadoProvidencia.ASIGNA_No_DESPACHO_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_No_DESPACHO_.name()).target(EstadoProvidencia.INCULPADO_NOTIFICADO_.name())
                .event(AccionesProvidencia.FLUJO_SOBRESEER_ABSOLVER.name())
                .and()
            // -----------        DEVOLVER  ABSOLVER SOBRESEER -------------


            ;
        }

        { // ---------------------------------   FLUJO ESPECIFICO PARA PROVIDENCIA SANCION    ------------------------------------------
            transitions

                .withExternal()
//                .source(EstadoProvidencia.PROVIDENCIA_CREADA.name()).target(EstadoProvidencia.SJ_RECIBE_PROVIDENCIA.name())
                .source(EstadoProvidencia.PROVIDENCIA_APLICA_SANCION.name()).target(EstadoProvidencia.REVISA_PROVIDENCIA______.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SJ_RECIBE_PROVIDENCIA.name()).target(EstadoProvidencia.SECRETARIA_REVISA_PROVIDENCIA.name())
                .source(EstadoProvidencia.REVISA_PROVIDENCIA______.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_PROVIDENCIA.name()).target(EstadoProvidencia.SUBDIRECCION_ASIGNA_UPD_RESOLUCION_MEMO.name())
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO_.name()).target(EstadoProvidencia.REVISA_SECRETARIA.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SUBDIRECCION_ASIGNA_UPD_RESOLUCION_MEMO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_ASIGNACION_UPD.name())
                .source(EstadoProvidencia.REVISA_SECRETARIA.name()).target(EstadoProvidencia.ASIGNACION_UPD.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_ASIGNACION_UPD.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_MEMO.name())
                .source(EstadoProvidencia.ASIGNACION_UPD.name()).target(EstadoProvidencia.REVISA_SECRETARIA_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.REDACCION_RESOLUCION_MEMO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_MEMO.name())
                .source(EstadoProvidencia.REVISA_SECRETARIA_.name()).target(EstadoProvidencia.RESOLUCION_QUE_APLICA_SANCION_PARA_RECURSO_Y_MEMO_CONDUCTOR.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_MEMO.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION_A_RESOLUCION.name())
                .source(EstadoProvidencia.RESOLUCION_QUE_APLICA_SANCION_PARA_RECURSO_Y_MEMO_CONDUCTOR.name()).target(EstadoProvidencia.REVISA_SECRETARIA__.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION_A_RESOLUCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_VISA_SUBDIRECCION.name())
                .source(EstadoProvidencia.REVISA_SECRETARIA__.name()).target(EstadoProvidencia.VISA_RESOLUCION_Y_FIRMA_MEMO.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_VISA_SUBDIRECCION.name()).target(EstadoProvidencia.DGD_DESPACHA_RESOLUCION.name())
                .source(EstadoProvidencia.VISA_RESOLUCION_Y_FIRMA_MEMO.name()).target(EstadoProvidencia.REVISA_SECRETARIA___.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.DGD_DESPACHA_RESOLUCION.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN_A_RESOLUCION.name())
                .source(EstadoProvidencia.REVISA_SECRETARIA___.name()).target(EstadoProvidencia.ASIGNACION_No_DESPACHO_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN_A_RESOLUCION.name()).target(EstadoProvidencia.DGDP_ASIGNANDO_NUMERO_A_RESOLUCION.name())
                .source(EstadoProvidencia.ASIGNACION_No_DESPACHO_.name()).target(EstadoProvidencia.REVISA_ASESOR.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.DGDP_ASIGNANDO_NUMERO_A_RESOLUCION.name()).target(EstadoProvidencia.SJ_RECIBE_RESOLUCION.name())
                .source(EstadoProvidencia.REVISA_ASESOR.name()).target(EstadoProvidencia.FIRMA_RESOLUCION_QUE_APLICA_SANCION_PARA_RECURSO.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SJ_RECIBE_RESOLUCION.name()).target(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_RESOLUCION.name())
                .source(EstadoProvidencia.FIRMA_RESOLUCION_QUE_APLICA_SANCION_PARA_RECURSO.name()).target(EstadoProvidencia.REVISA_ASESOR_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_RESOLUCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION_RESOLUCION.name())
                .source(EstadoProvidencia.REVISA_ASESOR_.name()).target(EstadoProvidencia.ASIGNA_No_DGDP.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION_RESOLUCION.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_RESOLUCION.name())
                .source(EstadoProvidencia.ASIGNA_No_DGDP.name()).target(EstadoProvidencia.RECEPCIONA_DGDP.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_RESOLUCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_DE_SUBDIRECCION_A_RESOLUCION.name())
                .source(EstadoProvidencia.RECEPCIONA_DGDP.name()).target(EstadoProvidencia.NOTIFICACION_PARA_RECURSO.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_DE_SUBDIRECCION_A_RESOLUCION.name()).target(EstadoProvidencia.NOTIFICAR_INCULPADO.name())
                .source(EstadoProvidencia.NOTIFICACION_PARA_RECURSO.name()).target(EstadoProvidencia.REVISA_SECRETARIA____.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
//                .source(EstadoProvidencia.SECRETARIA_REVISA_FIRMA_DE_SUBDIRECCION_A_RESOLUCION.name()).target(EstadoProvidencia.NOTIFICAR_INCULPADO.name())
                .source(EstadoProvidencia.REVISA_SECRETARIA____.name()).target(EstadoProvidencia.FIRMA_SUB_DIRECTORA.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_SUB_DIRECTORA.name()).target(EstadoProvidencia.REVISA_SECRETARIA_____.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA_____.name()).target(EstadoProvidencia.DESPACHO_DGD.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHO_DGD.name()).target(EstadoProvidencia.NOTIFICA_RESOLUCION_PARA_RECURSO.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_RESOLUCION_PARA_RECURSO.name()).target(EstadoProvidencia.APELA_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.APELA_NO_APELA.name()).target(EstadoProvidencia.APELA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.APELA_NO_APELA.name()).target(EstadoProvidencia.NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                // ---------- APELA SANCION -----------
//                .withExternal()
//                .source(EstadoProvidencia.APELA_NO_APELA.name()).target(EstadoProvidencia.PROVIDENCIA_CREADA_INFORME_RECURSO.name())
//                .event(AccionesProvidencia.FLUJO_APELA.name())
//                .and()
//                .withExternal()
//                .source(EstadoProvidencia.PROVIDENCIA_CREADA_INFORME_RECURSO.name()).target(EstadoProvidencia.ASESOR_REVISA_PROVIDENCIA_APELACION.name())
//                .event(AccionesProvidencia.FLUJO_APELA.name())
//                .and()
                .withExternal()
                .source(EstadoProvidencia.ASESOR_REVISA_PROVIDENCIA_APELACION.name()).target(EstadoProvidencia.RECIBE_RECURSO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECIBE_RECURSO.name()).target(EstadoProvidencia.REVISA_SECRETARIA______.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA______.name()).target(EstadoProvidencia.ASIGNA_ABOGADO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_ABOGADO.name()).target(EstadoProvidencia.SECRETARIA_REVISA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA.name()).target(EstadoProvidencia.INFORME_PRONUNCIADO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INFORME_PRONUNCIADO.name()).target(EstadoProvidencia.INFORME_PRONUNCIADO_ACOGE_PARCIAL.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INFORME_PRONUNCIADO.name()).target(EstadoProvidencia.INFORME_PRONUNCIADO_ACOGE.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INFORME_PRONUNCIADO.name()).target(EstadoProvidencia.INFORME_PRONUNCIADO_RECHAZA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INFORME_PRONUNCIADO_ACOGE_PARCIAL.name()).target(EstadoProvidencia.SECRETARIA_REVISA_.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INFORME_PRONUNCIADO_ACOGE.name()).target(EstadoProvidencia.SECRETARIA_REVISA_.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.INFORME_PRONUNCIADO_RECHAZA.name()).target(EstadoProvidencia.SECRETARIA_REVISA_.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_.name()).target(EstadoProvidencia.FIRMA_INFORME_.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_INFORME_.name()).target(EstadoProvidencia.SECRETARIA_REVISA__.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA__.name()).target(EstadoProvidencia.DESPACHO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and();

            //----------- FLUJO Se crea nueva providencia pronunciando recurso -----------------
            transitions
                .withExternal()
                .source(EstadoProvidencia.REVISA_PRONUNCIAMIENTO.name()).target(EstadoProvidencia.ASIGNA_No_DGD.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_No_DGD.name()).target(EstadoProvidencia.REVISA_SECRETARIA_______.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA_______.name()).target(EstadoProvidencia.ASIGNACION_SUB_DIRECTORA.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_SUB_DIRECTORA.name()).target(EstadoProvidencia.REVISA_SECRETARIA________.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA________.name()).target(EstadoProvidencia.RESOLUCION_QUE_PRONUNCIA_RECURSO_CON_MEMO_CONDUCTOR.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RESOLUCION_QUE_PRONUNCIA_RECURSO_CON_MEMO_CONDUCTOR.name()).target(EstadoProvidencia.REVISA_SECRETARIA_________.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA_________.name()).target(EstadoProvidencia.VISA_Y_FIRMA_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA_.name()).target(EstadoProvidencia.REVISA_SECRETARIA__________.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA__________.name()).target(EstadoProvidencia.DESPACHO_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHO_.name()).target(EstadoProvidencia.REVISA_RESOLUCION_QUE_PRONUNCIA.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_QUE_PRONUNCIA.name()).target(EstadoProvidencia.FIRMA_DIRECTOR_NACIONAL_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DIRECTOR_NACIONAL_.name()).target(EstadoProvidencia.DESPACHA_ASESOR.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHA_ASESOR.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO__.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO__.name()).target(EstadoProvidencia.ASIGNA_NUMERO_SJ_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNA_NUMERO_SJ_.name()).target(EstadoProvidencia.NOTIFICACION_RESULTADO_DE_RECURSO.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICACION_RESULTADO_DE_RECURSO.name()).target(EstadoProvidencia.ELABORA_RESOLUCION_QUE_APLICA_SANCION_FINAL.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_RESOLUCION_QUE_APLICA_SANCION_FINAL.name()).target(EstadoProvidencia.REVISA_SECRETARIA___________.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA___________.name()).target(EstadoProvidencia.VISA_Y_FIRMA__.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA__.name()).target(EstadoProvidencia.REVISA_SECRETARIA____________.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA____________.name()).target(EstadoProvidencia.DESPACHO_DE_SJ.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHO_DE_SJ.name()).target(EstadoProvidencia.REVISA_RESOLUCION_QUE_APLICA_SANCION_FINAL.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_QUE_APLICA_SANCION_FINAL.name()).target(EstadoProvidencia.FIRMA_DIRECTOR_NACIONAL__.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DIRECTOR_NACIONAL__.name()).target(EstadoProvidencia.DESPACHA_ASESOR_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHA_ASESOR_.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO___.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO___.name()).target(EstadoProvidencia.RECEPCION_CONTRALORIA.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCION_CONTRALORIA.name()).target(EstadoProvidencia.RECEPCION_CONTRALORIA_TOMA_DE_RAZON_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCION_CONTRALORIA.name()).target(EstadoProvidencia.RECEPCION_CONTRALORIA_REGISTRA_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCION_CONTRALORIA.name()).target(EstadoProvidencia.RECEPCION_CONTRALORIA_REPRESENTA_.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
            ; transitions
                // ---------- NO APELA SANCION -----------
                .withExternal()
                .source(EstadoProvidencia.REALIZA_CERTIFICACION.name()).target(EstadoProvidencia.ELABORA_RESOLUCION_AFINATORIA_Y_MEMO.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_RESOLUCION_AFINATORIA_Y_MEMO.name()).target(EstadoProvidencia.REVISA_SECRETARIA_____________.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA_____________.name()).target(EstadoProvidencia.VISA_Y_FIRMA____.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA____.name()).target(EstadoProvidencia.REVISA_SECRETARIA______________.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA______________.name()).target(EstadoProvidencia.NUMERO_DESPACHO.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NUMERO_DESPACHO.name()).target(EstadoProvidencia.REVISA_RESOLUCION_AFINATORIA_APLICA_SANCION_FINAL.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_RESOLUCION_AFINATORIA_APLICA_SANCION_FINAL.name()).target(EstadoProvidencia.FIRMA_DIRECTOR_NACIONAL___.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DIRECTOR_NACIONAL___.name()).target(EstadoProvidencia.DESPACHA_ASESOR__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHA_ASESOR__.name()).target(EstadoProvidencia.ASIGNACION_DE_NUMERO____.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNACION_DE_NUMERO____.name()).target(EstadoProvidencia.RECEPCIONA_CONTRALORIA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCIONA_CONTRALORIA.name()).target(EstadoProvidencia.TOMA_DE_RAZON____.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCIONA_CONTRALORIA.name()).target(EstadoProvidencia.REGISTRA__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCIONA_CONTRALORIA.name()).target(EstadoProvidencia.REPRESENTA__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
        ; transitions
                // ---------------- INFORME JURIFICO -  SANCIONAR  -NO APELA - TOMA DE RAZON -----------------
                .withExternal()
                .source(EstadoProvidencia.RECIBE_DGDP__.name()).target(EstadoProvidencia.RECEPCIONA_SJ_.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCIONA_SJ_.name()).target(EstadoProvidencia.ELABORA_NOTIFICACION_QUE_APLICA_SANCION_FINAL.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_NOTIFICACION_QUE_APLICA_SANCION_FINAL.name()).target(EstadoProvidencia.REVISA_SECRETARIA_______________.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA_______________.name()).target(EstadoProvidencia.VISA_Y_FIRMA_____.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA_____.name()).target(EstadoProvidencia.REVISA_SECRETARIA_________________.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISA_SECRETARIA_________________.name()).target(EstadoProvidencia.DESPACHO_SJ_.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHO_SJ_.name()).target(EstadoProvidencia.NOTIFICA_DENUNCIADO.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_DENUNCIADO.name()).target(EstadoProvidencia.ELABORA_MEMO_Y_REMUNERACION_.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_MEMO_Y_REMUNERACION_.name()).target(EstadoProvidencia.ELABORA_MEMO_DGDP_.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_MEMO_DGDP_.name()).target(EstadoProvidencia.ASIGNA_FOLIO_.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
        ; transitions
                // ---------------- INFORME JURIFICO -  SANCIONAR  -NO APELA - REGISTRA -----------------
                .withExternal()
                .source(EstadoProvidencia.RECIBE_DGDP___.name()).target(EstadoProvidencia.RECEPCIONA_SJ__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCIONA_SJ__.name()).target(EstadoProvidencia.ELABORA_NOTIFICACION_.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_NOTIFICACION_.name()).target(EstadoProvidencia.SECRETARIA_REVISA_____.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_____.name()).target(EstadoProvidencia.VISA_Y_FIRMA______.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA______.name()).target(EstadoProvidencia.SECRETARIA_REVISA______.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA______.name()).target(EstadoProvidencia.DESPACHO_SJ__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHO_SJ__.name()).target(EstadoProvidencia.NOTIFICA_DENUNCIADO_.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_DENUNCIADO_.name()).target(EstadoProvidencia.ELABORA_MEMO_Y_REMUNERACION__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_MEMO_Y_REMUNERACION__.name()).target(EstadoProvidencia.ELABORA_MEMO_DGDP__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_MEMO_DGDP__.name()).target(EstadoProvidencia.ASIGNA_FOLIO__.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
        ; transitions
                // ---------------- INFORME JURIFICO -  SANCIONAR  -SI APELA - TOMA DE RAZON -----------------
                .withExternal()
                .source(EstadoProvidencia.RECIBE_DGDP.name()).target(EstadoProvidencia.RECEPCIONA_SJ.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.RECEPCIONA_SJ.name()).target(EstadoProvidencia.ELABORA_NOTIFICACION.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_NOTIFICACION.name()).target(EstadoProvidencia.SECRETARIA_REVISA___.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA___.name()).target(EstadoProvidencia.VISA_Y_FIRMA___.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA___.name()).target(EstadoProvidencia.SECRETARIA_REVISA____.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA____.name()).target(EstadoProvidencia.DESPACHO_SJ.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHO_SJ.name()).target(EstadoProvidencia.NOTIFICACION_DENUNCIADO.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICACION_DENUNCIADO.name()).target(EstadoProvidencia.ELABORA_MEMO_Y_REMUNERACION.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_MEMO_Y_REMUNERACION.name()).target(EstadoProvidencia.ELABORA_MEMO_DGDP.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ELABORA_MEMO_DGDP.name()).target(EstadoProvidencia.ASIGNA_FOLIO.name())
                .event(AccionesProvidencia.FLUJO_SANCION.name())
                .and()
        ; transitions

                // ------------ DEVOLVER SANCION ---------------------

                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_MEMO.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_MEMO.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION_A_RESOLUCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION_MEMO.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_DEL_DN_A_RESOLUCION.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_VISA_DE_SUBDIRECCION_A_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION_RESOLUCION.name()).target(EstadoProvidencia.UPD_ELABORA_NOTIFICACION_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_DE_SUBDIRECCION_A_RESOLUCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_NOTIFICACION_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
        ; transitions
                //  -------------------------------------------------    FLUJO ESPECIFICO PARA PROVIDENCIA NO APELA  -------------------------------------------------

                .withExternal()
                .source(EstadoProvidencia.SE_NOTIFICO_INCULPADO.name()).target(EstadoProvidencia.CERTIFICACION_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.CERTIFICACION_NO_APELA.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_MEMO_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REDACCION_RESOLUCION_MEMO_NO_APELA.name()).target(EstadoProvidencia.REVISION_RESOLUCION_MEMO_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_RESOLUCION_MEMO_NO_APELA.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_Y_VISA_DE_SUBDIRECCION.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_Y_VISA_DE_SUBDIRECCION.name()).target(EstadoProvidencia.REVISANDO_FIRMA_Y_VISA_DE_SUBDIRECCION.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISANDO_FIRMA_Y_VISA_DE_SUBDIRECCION.name()).target(EstadoProvidencia.GESTOR_DOCUMENTAL_DESPACHA_A_DN.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.GESTOR_DOCUMENTAL_DESPACHA_A_DN.name()).target(EstadoProvidencia.DN_FIRMA_RESOLUCION_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DN_FIRMA_RESOLUCION_NO_APELA.name()).target(EstadoProvidencia.DGDP_ASIGNANDO_NUMERO_A_RESOLUCION_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DGDP_ASIGNANDO_NUMERO_A_RESOLUCION_NO_APELA.name()).target(EstadoProvidencia.TOMA_DE_RAZON_O_REGISTRA_O_REPRESENTA.name())
                .event(AccionesProvidencia.FLUJO_NO_APELA.name())
                .and()
        ; transitions
                //  -----------------------------   FLUJO ESPECIFICO PARA PROVIDENCIA TOMA RAZON O REGISTRA  ------------------------------------

                .withExternal()
                .source(EstadoProvidencia.TOMA_DE_RAZON_O_REGISTRA_O_REPRESENTA.name()).target(EstadoProvidencia.TOMA_DE_RAZON.name())
                .event(AccionesProvidencia.FLUJO_TOMA_RAZON.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.TOMA_DE_RAZON_O_REGISTRA_O_REPRESENTA.name()).target(EstadoProvidencia.REGISTRA.name())
                .event(AccionesProvidencia.FLUJO_REGISTRA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.TOMA_DE_RAZON.name()).target(EstadoProvidencia.SJ_RECIBE_PARA_REDACCION.name())
                .event(AccionesProvidencia.FLUJO_TOMA_RAZON.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REGISTRA.name()).target(EstadoProvidencia.SJ_RECIBE_PARA_REDACCION.name())
                .event(AccionesProvidencia.FLUJO_REGISTRA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SJ_RECIBE_PARA_REDACCION.name()).target(EstadoProvidencia.UPD_REDACTA_RESOLUCION_MEMO.name())
                .event(AccionesProvidencia.FLUJO_TOMA_RAZON.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.UPD_REDACTA_RESOLUCION_MEMO.name()).target(EstadoProvidencia.REALIZAR_NOTIFICACIONES.name())
                .event(AccionesProvidencia.FLUJO_TOMA_RAZON.name())
                .and()
        ; transitions
                //  -----------------------------    FLUJO ESPECIFICO PARA PROVIDENCIA REPRESENTA  -----------------------------------------------

                .withExternal()
                .source(EstadoProvidencia.TOMA_DE_RAZON_O_REGISTRA_O_REPRESENTA.name()).target(EstadoProvidencia.MEMO.name())
                .event(AccionesProvidencia.FLUJO_REPRESENTA.name())
                .and()
        ; transitions
                //  ------------    FLUJO DEVOLVER NO APELA  ------------
                .withExternal()
                .source(EstadoProvidencia.REVISION_RESOLUCION_MEMO_NO_APELA.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_MEMO_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_FIRMA_Y_VISA_DE_SUBDIRECCION.name()).target(EstadoProvidencia.REVISION_RESOLUCION_MEMO_NO_APELA.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DN_FIRMA_RESOLUCION_NO_APELA.name()).target(EstadoProvidencia.ESPERANDO_FIRMA_Y_VISA_DE_SUBDIRECCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()

                //  -------------------------------------------------    FLUJO ESPECIFICO PARA PROVIDENCIA APELA  ----------------------------------------------------

                .withExternal()
                .source(EstadoProvidencia.SE_NOTIFICO_INCULPADO.name()).target(EstadoProvidencia.UPD_REGISTRA_INCULPADO_SI_APELA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.UPD_REGISTRA_INCULPADO_SI_APELA.name()).target(EstadoProvidencia.DGD_DESPACHA_APELACION_A_DN.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DGD_DESPACHA_APELACION_A_DN.name()).target(EstadoProvidencia.APELACION_RECIBIDA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.APELACION_RECIBIDA.name()).target(EstadoProvidencia.SJ_RECEPCIONA_APELACION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SJ_RECEPCIONA_APELACION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_APELACION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_APELACION.name()).target(EstadoProvidencia.ASIGNANDO_ABOGADO_A_APELACION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ASIGNANDO_ABOGADO_A_APELACION.name()).target(EstadoProvidencia.ABOGADO_ELABORA_INFORME_APELACION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ABOGADO_ELABORA_INFORME_APELACION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_INFORME_APELACION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_INFORME_APELACION.name()).target(EstadoProvidencia.SUBDIRECCION_REVISA_INFORME_APELACION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SUBDIRECCION_REVISA_INFORME_APELACION.name()).target(EstadoProvidencia.SECRETARIA_DESPACHA_INFORME_APELACION_A_DGD.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_DESPACHA_INFORME_APELACION_A_DGD.name()).target(EstadoProvidencia.DGD_DESPACHA_INFORME_APELACION_A_DN.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DGD_DESPACHA_INFORME_APELACION_A_DN.name()).target(EstadoProvidencia.DN_EMITE_PROVIDENCIA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DN_EMITE_PROVIDENCIA.name()).target(EstadoProvidencia.PROVIDENCIA_EN_SJ.name())
                .event(AccionesProvidencia.EMITIR_PROVIDENCIA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.PROVIDENCIA_EN_SJ.name()).target(EstadoProvidencia.REVISION_DE_PROVIDENCIA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REVISION_DE_PROVIDENCIA.name()).target(EstadoProvidencia.SUBDIRECCION_ASIGNA_REDACCION_RESOLUCION_MEMO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SUBDIRECCION_ASIGNA_REDACCION_RESOLUCION_MEMO.name()).target(EstadoProvidencia.SECRETARIA_REVISA_ASIGNACION_REDACCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_ASIGNACION_REDACCION.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_MEMO_UPD.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REDACCION_RESOLUCION_MEMO_UPD.name()).target(EstadoProvidencia.SECRETARIA_REVISA_REDACCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_REDACCION.name()).target(EstadoProvidencia.VISA_Y_FIRMA_SUBDIRECCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA_SUBDIRECCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_VISA_Y_FIRMA_SUBDIRECCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_VISA_Y_FIRMA_SUBDIRECCION.name()).target(EstadoProvidencia.DESPACHA_A_DN.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHA_A_DN.name()).target(EstadoProvidencia.DN_FIRMA_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DN_FIRMA_RESOLUCION.name()).target(EstadoProvidencia.DGDP_ASIGNA_NUMERO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DGDP_ASIGNA_NUMERO.name()).target(EstadoProvidencia.SJ_RECIBE_RESOLUCION_CON_NUMERO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SJ_RECIBE_RESOLUCION_CON_NUMERO.name()).target(EstadoProvidencia.REDACCION_DE_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.REDACCION_DE_RESOLUCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION.name()).target(EstadoProvidencia.SUBDIRECCION_VISA_FIRMA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
        ; transitions
                //          SOLO SI LE DIO AL BOTON REALIZAR MEMO CONDUCTO ES QUE PUEDE MOVERSE AL OTRO ESTADO " REALIZADO_MEMO_CONDUCTOR ".
                .withExternal()
                .source(EstadoProvidencia.REALIZADO_MEMO_CONDUCTOR.name()).target(EstadoProvidencia.SECRETARIA_REVISA_VISA_FIRMA_MEMO_CONDUCTOR.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_VISA_FIRMA_MEMO_CONDUCTOR.name()).target(EstadoProvidencia.DESPACHO_MEMO_CONDUCTOR_A_DN.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DESPACHO_MEMO_CONDUCTOR_A_DN.name()).target(EstadoProvidencia.FIRMA_DEL_DN_A_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DEL_DN_A_RESOLUCION.name()).target(EstadoProvidencia.ESPERANDO_ASIGNACION_DE_NUMERO.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ESPERANDO_ASIGNACION_DE_NUMERO.name()).target(EstadoProvidencia.EXAMEN_DE_LEGALIDAD.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
            ;
            transitions
                // ------------     DEVOLVER  APELA     --------------
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_INFORME_APELACION.name()).target(EstadoProvidencia.ABOGADO_ELABORA_INFORME_APELACION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SUBDIRECCION_REVISA_INFORME_APELACION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_INFORME_APELACION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DN_EMITE_PROVIDENCIA.name()).target(EstadoProvidencia.SUBDIRECCION_REVISA_INFORME_APELACION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_REDACCION.name()).target(EstadoProvidencia.REDACCION_RESOLUCION_MEMO_UPD.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.VISA_Y_FIRMA_SUBDIRECCION.name()).target(EstadoProvidencia.SECRETARIA_REVISA_REDACCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.DN_FIRMA_RESOLUCION.name()).target(EstadoProvidencia.VISA_Y_FIRMA_SUBDIRECCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION.name()).target(EstadoProvidencia.REDACCION_DE_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SUBDIRECCION_VISA_FIRMA.name()).target(EstadoProvidencia.SECRETARIA_REVISA_RESOLUCION.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.FIRMA_DEL_DN_A_RESOLUCION.name()).target(EstadoProvidencia.SUBDIRECCION_VISA_FIRMA.name())
                .event(AccionesProvidencia.FLUJO_DEVOLVER.name())
                .and()
                //  ------------------------------------------  ALCANCE Y RESOLUCION  --------------------------------------------------
            ;
            transitions
                .withExternal()
                .source(EstadoProvidencia.EXAMEN_DE_LEGALIDAD.name()).target(EstadoProvidencia.ALCANCE_O_RESOLUCION.name())
                .event(AccionesProvidencia.SELECCIONO_EXAMEN_LEGALIDAD.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.ALCANCE_O_RESOLUCION.name()).target(EstadoProvidencia.SJ_RECIBIO_RESOLUCION.name())
                .event(AccionesProvidencia.SELECCIONO_RESOLUCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SJ_RECIBIO_RESOLUCION.name()).target(EstadoProvidencia.NOTIFICA_E_INFORMA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SELECCION_ALCANCE.name()).target(EstadoProvidencia.SJ_RECIBIO_ALCANCE.name())
                .event(AccionesProvidencia.SELECCIONO_ALCANCE_CON_RESOLUCION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SJ_RECIBIO_ALCANCE.name()).target(EstadoProvidencia.NOTIFICA_E_INFORMA.name())
                .event(AccionesProvidencia.FLUJO_APELA.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.SELECCION_ALCANCE.name()).target(EstadoProvidencia.ALCANCE_SIN_RESOLUCION.name())
                .event(AccionesProvidencia.SELECCIONO_ALCANCE_SIN_RESOLUCION.name())
                .and()
            ;
            transitions
//            ------------------------------------------  SUSPENSION / MULTA / SENSURA / DESTITUCION  ---------------------------------------

                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_E_INFORMA_SUSPENSION.name()).target(EstadoProvidencia.SUSPENSION.name())
                .event(AccionesProvidencia.NOTIFICO_A_REMUNERACION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_E_INFORMA_MULTA.name()).target(EstadoProvidencia.MULTA.name())
                .event(AccionesProvidencia.NOTIFICO_A_REMUNERACION.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_E_INFORMA_SENSURA.name()).target(EstadoProvidencia.SENSURA.name())
                .event(AccionesProvidencia.NOTIFICAR_A_DGDP.name())
                .and()
                .withExternal()
                .source(EstadoProvidencia.NOTIFICA_E_INFORMA_DESTITUCION.name()).target(EstadoProvidencia.DESTITUCION.name())
                .event(AccionesProvidencia.NOTIFICAR_A_DGDP.name())
                .and()
            ;
        }

    }

    @Override
    public void configure(StateMachineConfigurationConfigurer<String, String> config) throws Exception {

        StateMachineListenerAdapter<String, String> adapter = new StateMachineListenerAdapter<String, String>() {
            @Override
            public void stateChanged(State<String, String> from, State<String, String> to) {
                logger.info("Listener stateChanged from {} to {}", (from != null) ? from.getId() : null, (to != null) ? to.getId() : null);
            }
            @Override
            public void eventNotAccepted(Message<String> event) {
                logger.info("Listener eventNotAccepted {}", event);
            }

            @Override
            public void transition(Transition<String, String> transition) {
                logger.info("Listener transition from {} to {}" , (transition.getSource() != null) ? transition.getSource().getId()
                    :null, (transition.getTarget() != null) ? transition.getTarget().getId() : null);
            }

            @Override
            public void transitionStarted(Transition<String, String> transition) {
                logger.info("Listener transitionStarted from {} to {}", (transition.getSource() != null) ? transition.getSource().getId()
                    : null, (transition.getTarget() != null) ? transition.getTarget().getId() : null);
            }

            @Override
            public void transitionEnded(Transition<String, String> transition) {
                logger.info("Listener transitionEnded from {} to {}" , (transition.getSource() != null) ? transition.getSource().getId()
                    : null, (transition.getTarget() != null) ? transition.getTarget().getId() : null);
            }

            @Override
            public void stateMachineStarted(StateMachine<String, String> stateMachine) {
                logger.info("Listener stateMachineStarted");
            }

            @Override
            public void stateMachineStopped(StateMachine<String, String> stateMachine) {
                logger.info("Listener stateMachineStopped");
            }

            @Override
            public void stateMachineError(StateMachine<String, String> stateMachine, Exception exception) {
                logger.info("Listener stateMachineError {}", exception.getMessage());
            }

            @Override
            public void stateContext(StateContext<String, String> stateContext) {
                logger.info("Listener stateContext (Message Payload: {}, Message Headers: {}, Variables: {}", (stateContext.getMessage() != null)
                    ? stateContext.getMessage().getPayload() : null, stateContext.getMessageHeaders(), stateContext.getExtendedState().getVariables());
            }
        };
        config.withConfiguration()
            .autoStartup(true)
            .listener(adapter);
    }
}
